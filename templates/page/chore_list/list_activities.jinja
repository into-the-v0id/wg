{% extends "layout/default.jinja" %}

{% block title %}Activities of List: {{ chore_list.name }}{% endblock %}

{% block back_link %}
    <a href="/chore-lists/{{ chore_list.id }}" class="secondary">&larr; Back</a>
{% endblock %}

{% block content %}
    <div>
        <ul>
            {% for activity in activities %}
                {% if !activity.is_deleted() %}
                    <li>
                        {% for chore in chores %}
                            {% if chore.id == activity.chore_id %}
                                <a href="/chores/{{ chore.id }}" class="secondary">{{ chore.name }}</a> ({{ chore.points }} PT)
                            {% endif %}
                        {% endfor %}
                        {% for user in users %}
                            {% if user.id == activity.user_id %}
                                by <a href="/users/{{ user.id }}" class="secondary">{{ user.first_name }}</a>
                            {% endif %}
                        {% endfor %}
                        at <a href="/chore-activities/{{ activity.id }}">{{ activity.date.format("%Y-%m-%d") }}</a>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
        <a href="/chore-lists/{{ chore_list.id }}/activities/create" role="button">Create</a>
    </div>

    <br>
    <br>

    <div>
        <h4>Past Activities</h4>
        <ul>
            {% for activity in activities %}
                {% if activity.is_deleted() %}
                    <li>
                        {% for chore in chores %}
                            {% if chore.id == activity.chore_id %}
                                <a href="/chores/{{ chore.id }}" class="secondary">{{ chore.name }}</a> ({{ chore.points }} PT)
                            {% endif %}
                        {% endfor %}
                        {% for user in users %}
                            {% if user.id == activity.user_id %}
                                by <a href="/users/{{ user.id }}" class="secondary">{{ user.first_name }}</a>
                            {% endif %}
                        {% endfor %}
                        at <a href="/chore-activities/{{ activity.id }}">{{ activity.date.format("%Y-%m-%d") }}</a>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
{% endblock %}
